# ПРОЕКТИРОВАНИЕ ПРЕДПРИЯТИЯ РЕЦЕПТУРНОГО ПРОИЗВОДСТВА В КОНТЕКСТЕ КОНЦЕПЦИИ INDUSTRY 4.0

**Аннотация.** В данной работе рассматривается усовершенствованный подход к онтологическому проектированию предприятий рецептурного производства, использующий принципы, разработанные в рамках концепции Industry 4.0.

**Ключевые слова:** автоматизация производства, промышленный интернет вещей, индустрия 4.0, киберфизические системы.

## Введение
Данная статья рассматривает дальнейшее развитие автоматизации предприятий рецептурного производства на примере ОАО "Савушкин продукт". Оно состоит в переходе от рассмотрения производственных процессов, происходящих в рамках конкретного предприятия, к рассмотрению полного продуктового цикла - от получения заявки от магазина-клиента до ее выполнения (удовлетворения запроса потребителя). Данный процесс, кроме самого предприятия, включает в качестве субъектов молочные фермы, логистические службы, магазины и др. Также даже в рамках одного предприятия на сегодняшний день используются разрозненные системы (несколько SCADA-систем, система управления транспортом, система управления складом и др.). Стыковка таких систем и поддержка согласованности информации в них осуществляется вручную (либо опускается). Сейчас существует потребность автоматизировать согласование информации и обеспечить, там где это уместно, взаимодействие устройств на разных этапах продуктового цикла. Наличие такой потребности привело к появлению инициативы Industry 4.0 в Германии и ей аналогичных в других странах мира.

Таким образом, целью работы является развитие предложенной в [Савушкин, 2017] онтологической модели предприятия рецептурного производства для расширения круга описываемых этапов производства, в том числе и не происходящих непосредственно на предприятии, и учитывающее результаты, полученные в рамках инициативы Industry 4.0.

## 1. Обзор и анализ
Концепция Industry 4.0 была сформулирована в Германии в 2011 году. Она подразумевает создание и внедрение в производство т.н. киберфизических систем (КФС) и использование интернета вещей и услуг в производственных процессах [9]. Стоит отметить, что термин специфичен для Германии и за ее пределами используется редко. Аналогичные концепции в других странах называются по-разному - "умная фабрика" (Нидерланды), "фабрика будущего" (Италия), "промышленный интернет" (США).

Под киберфизической системой понимается совокупность интеллектуальных, легко интегрируемых физических компонентов со встроенными в них вычислительными ресурсами, тесно взаимодействующих между собой и отслеживающих изменения в состоянии внешнего мира [10].

Для построения киберфизической системы необходима интеграция вычислительных ресурсов и физико-технических процессов. Сенсоры, манипуляторы, информационные и управляющие системы должны взаимодействовать между собой на всех этапах производства, в том числе и выходящих за рамки одного конкретного предприятия [4].

Основные принципы концепции Industry 4.0 [DesignPrinciples 2016]:

- **Взаимодействие**. Возможность взаимодействия устройств, датчиков, людей посредством Интернета вещей (IoT), Интернета людей (IoP), Интернета услуг (IoS).
- **Виртуализация**. Означает способность киберфизической системы контролировать физические процессы. Данные сенсоров проецируются на модель предприятия, включающих состояние всех киберфизических систем. В случае возникновения нештатной ситуации должна быть возможность уведомить оператора, предоставив ему информацию по ее устранению и обеспечению безопасности, тем самым осуществляя поддержку принятия решений персоналом.
- **Децентрализация**. Растущая потребность в штучных партиях заказных продуктов увеличивает сложность централизованного управления производством. КФС могут иметь встроенные вычислительные модули, позволяющие им принимать решения самостоятельно и переадресовывать задачу управляющей системе только в случае необходимости. Несмотря на это, необходимо обеспечить контроль качества конечного продукта и прослеживаемость, что требует централизованного управления. К примеру, необходимые шаги производственного процесса могут быть закодированы в RFID-метках, что освобождает от необходимости централизованного управления данным аспектом производства малых партий продукта.
- **Анализ и реагирование в реальном времени**. С целью управления производством необходимо, чтобы данные с сенсоров постоянно собирались и анализировались в режиме реального времени. В случае отказа одной производственной установки, можно "перепоручить" её задачу другой.
- **Ориентированность на услуги**. Услуги компаний, КФС и людей доступны в Интернете услуг и могут быть использованы другими участниками. Услуги могут предоставляться как внутри предприятия, так и другим предприятиям. КФС предоставляют свои услуги в виде веб-служб. Это позволит реализовать производство продукта путем комбинирования производственных операций в соответствии со спецификацией клиента, закодированной, например на RFID-метке.
- **Модульность**. Система должна быть гибко адаптируема к меняющимся требованиям (например, сезонным изменения в потреблении, изменению характеристик продукта или п). Адаптация должна осуществляться заменой или расширением отдельных компонентов системы. Обеспечение совместимости компонентов требует наличия стандартизированных механизмов взаимодействия, позволяющих автоматически идентифицировать компоненты и включать их в интернет услуг.

Потребность в комплексной автоматизации сложных процессов, требующих согласованной работы множества служб и технических средств, создает потребность в разработке подобных систем. В дальнейшем будем рассматривать повышение уровня автоматизации предприятий рецептурного производства с точки зрения разработки прототипа киберфизической системы для ОАО “Савушкин продукт”.

Разрабатываемый прототип должен обеспечивать комплексную автоматизацию процесса производства творога “Хуторок” от доения коровы до поступления готовой продукции в магазин. В этом процессе можно выделить три основные стадии:
- От доения коровы до поступления молока на завод.
- Обработка молока на заводе.
- Доставка готовой продукции с завода в магазины.

Применение индустрии 4.0 к предприятию рецептурного производства

Принцип рассмотрения предприятия как единой информационной (многоагентной) системы, при этом накрываются этапы не только в рамках предприятия, а полная схема (корова-завод-прилавок).

Обоснование того, что без единого информационного пространства невозможно отследить все перечисленные этапы в полной мере.

Такое информационное пространство обеспечивается технологией OSTIS.

Основные положения подхода:

* вся информация объединяется в единое информационное пространство (базу знаний предприятия)
* все участники процесса (как люди, так и работы и прочее) трактуются как агенты над этой общей базой знаний. Это значит что они (а) отслеживают интересующие их ситуации в БЗ и реагируют на них (б) описывают результаты своей деятельности в БЗ, чтобы все это видели, могли анализировать и т.д. В конечном итоге весь менеджмент тогда сводится к грамотной спецификации задач в такой общей БЗ, указания их приоритетов и проч. (провести параллели с онтологией управления деятельностью).

Внедрение новых систем автоматизации, в том числе интеллектуальных, на предприятии должно основываться на уже имеющихся у предприятия ресурсах  [Galbrecht 2017].

## 2. Архитектура предлагаемой системы
Прототип киберфизической системы ОАО “Савушкин продукт” будем строить на основании предложенного в [Савушкин 2017] онтологического подхода к проектированию предприятий. Это означает, что:

- Сама система имеет многоагентную иерархическую организацию - агенты обработки знаний могут объединяться в коллективы произвольной степени вложенности (членом коллектива агентов также может быть коллектив агентов).
- База знаний системы имеет иерархическую организацию, т.е. представляет собой иерархию предметных областей и соответствующих им онтологий.
- В качестве агентов могут выступать программы (в том числе и непроцедурного типа), программно-аппаратные комплексы и персонал предприятия.
- Агенты взаимодействуют, добавляя или модифицируя определенные фрагменты семантической сети в общей графодинамической памяти.

В рамках разрабатываемого прототипа киберфизической системы для комплексного описания процесса производства предлагается, среди прочих, использовать следующие модели:

* модели языков описания ячеек производства
* модели ячеек производства, описанные с помощью этих языков
* модели логистических процессов
* модель взаимодействия промышленных роботов

Модель логистических процессов необходима на всех этапах: для описания внешнелогистических процессов на первом и третьем этапах и внутренней логистики - на втором. Модели языков описания и описанные с их помощью модели ячеек используются в рамках второй стадии для формализации процесса производства и структуры используемого для этого оборудования. Модель взаимодействия промышленных роботов уточняет физическую модель предприятия, причем понятие робота имеет расширенную трактовку - под ним могут пониматься также технологические установки и их комплексы, работающие либо с минимальным вмешательством человека, либо вовсе без него.

Перечисляем задачи каждого компонента, пишем какие там есть проблемы, как их можно решать, имея Технологию OSTIS, т.е. единую БЗ,  гибкую многоагентную МОЗ и гибкий ПИ с разными внешними языками.

Говорим про то, что важную роль для автоматизации, особенно внутри завода играет конечно роботизация, но чтобы это все вместе работало, каждый робот трактуется как агент единой системы. Это позволяет обеспечить более эффективное управление роботами через БЗ, т.е. по сути легко перепрограммировать роботов, добавлять новых роботов и т.д.

Рассказываем о том, что дает такой подход в случае логистики (непрерывный мониторинг на любом уровне детализации, возможность выявления нештатных ситуаций, их анализа и иногда самоустранения). То же самое кстати на уровне завода.

## 3. Реализация моделей, используемых для описания предприятия и его процессов
### 3.1 Модель языков описания ячейки производства творога “Хуторок”
Каждая интеллектуальная система оперирует базой знаний на внутреннем языке, и диалог осуществляется как обмен сообщениями между пользователем и системой. Чтобы такой диалог состоялся, необходимо отобразить фрагмент базы знаний во внешнюю форму. Такая форма может иметь как универсальный, так и специализированный характер.

Универсальным внешним языком обмена сообщениями будем называть язык внешнего обмена сообщениями, позволяющий описывать знания любого вида. К таким языкам относится SC-код и все его представления/

В контексте автоматизированного производства и стандарта ISA-88, выделяются следующие специализированные внешние языки - язык описания процедурной модели (PFC) и язык описания физической модели (P&ID). С помощью языка PFC будет описан фрагмент производственной ячейки по изготовлению творога “Хуторок”, который будет рассмотрен далее.
Структуру внешнего языка (например, языка PFC) можно описать множеством предметных областей:

***Предметная область языка PFC***

<= *декомпозиция sc-структуры*:  
{  
*Предметная область семантики языка PFC*  
*Предметная область текстов языка PFC*  
*Предметная область правил языка PFC*  
}

Семантика языка подразумевает выделения набора однозначно определенных сущностей, достаточных для написания текстов, несущих смысловую нагрузку для пользователя или машины (системы). Под текстами языка понимаются синтаксические структуры, являющиеся изображениями сущностей языка. Наконец, правила языка задают однозначные соответствия между множеством сущностей (алфавитом языка) и множеством изображений (знаков файлов), используемые для трансляции текстов в память интеллектуальной системы и из нее, а также для визуализации этих текстов.

В процессе описания каждого языка можно выделить некоторые аспекты, являющиеся общими для всех языков или для конкретного семейства языков. Исследования в этой области направлены на обоснование некоторого метаязыка, задающего структуру описания большинства существующих языков. Данный метаязык даст толчок к развитию естественно-языковых интерфейсов и позволит привнести в лингвистические аспекты любого языка алгоритмическую точность.
Язык PFC определяется в главе 6 стандарта ISA-88.00.02 и предназначен для описания рецептов со сложными процедурами, включающими параллельные шаги и условные ветвления. PFC-диаграммы изображают процедурную логику, используя набор значков, соединенных направленными связями, указывающими порядок исполнения процедурных элементов.

Алфавит языка PFC включает следующие элементы:

* процедурные элементы - элементы процедурной иерархии (фазы, операции и др.);
* дополнительные элементы - элементы, отвечающие за распределение, согласование и движение продукта в рамках процедуры (элемент размещения, элемент синхронизации)
* структуры, представленные в виде классов временных сущностей, задающих порядок исполнения процедурных элементов (выбор ветви исполнения, параллельно исполняемые ветви);
переходы между процедурными и дополнительными элементами (неявный и явный переход, требующий выполнения некоторого условия).

### 3.2 Модель ячейки производства творога “Хуторок”
Описание модели рецептурного производства.

Структура производственной ячейки и иллюстрации схем на PFC/SCg.

### 3.3 Модель логистических процессов производства творога “Хуторок”
Любая задача - это комплексная логистическая задача. Но даже решение относительно простых подзадач (например, складская логистика) не так очевидно [Колчмахин 2014].

Логистическая цепочка производства творога “Хуторок” включает следующие этапы:

* Молочная ферма
    - Корова
    - Танк
* Молочный завод
    - Молоковоз
    - Пост приемки
    - Танк приемки
    - Танк молокохранилища
    - ПОУ
    - Коагулятор
    - ПФУ
    - Охладитель
    - Коробка
    - Палета (поддон)
    - Склад
    - Зона комплектации
    - Грузовик
* Магазин
    - Полка
    - Покупатель

Молоко после доения на молочной ферме собирается в специальную емкость (танк) и охлаждается перед закачкой в молоковоз. Также проводятся различные лабораторные анализы (органолептические, химические и другие) чтобы определить качество молока. Информация о пробах фиксируется (учетная система предприятия, обычно 1C).

Далее молоко перекачивается в молоковоз, который везет его непосредственно на молочный завод. Его движение отслеживается, так как необходимо максимально быстро перекачать его в танк (уже на заводе) и сохранить свежим (холодным). Для решения данной задачи могут использоваться различные средства мониторинга положения автотранспорта (TMS-система, карты OpenStreetMap + информация от GPS-навигатора машины, GPS-навигатор сотового телефона водителя и т.п.). Также логист может непосредственно звонить водителю для уточнения его местонахождения.
После приезда на молочный завод, лаборатория снова выполняет анализы (учетная система предприятия) и определяется куда (в какой танк с какого поста) будет осуществляться перекачка. Далее оператор приемки перекачивает молоко (используется SCADA-система для управления процессом), вводит необходимые данные для материального учета входного сырья (учетная система предприятия).

Молоко перекачивается в танк молокохранилища, охлаждается. Оператор приемки в координации с оператором аппаратного цеха и оператором творожного цеха осуществляет приготовление смеси (используются ПОУ) и подачу ее в нужный коагулятор творожного цеха (несколько SCADA-систем, каждый оператор использует свой проект). Мастера соответствующих цехов также ведут записи о межцеховом перемещении материальных ценностей (учетная система предприятия).

Из смеси в коагуляторе творожного цеха оператор готовит творожную массу, далее подает ее для формовки на ПФУ, далее операторы фасовочной линии (или роботы, OLP-система) перекладывают сформованный продукт в потребительскую тару - в полиэтиленовую упаковку. Упакованный творог маркируется, охлаждается и операторами (или роботами) укладывается в коробки, коробки укладываются на поддоны и через конвейер попадают на автоматический склад (система управления складом - WMS-система).

Поддон из автоматического склада по конвейеру доставляется в зону комплектации (WMS-система). Далее кладовщики (или роботы, OLP-система) осуществляют загрузку уже машин. Мастера при этом ведут записи об отгрузке готовой продукции (учетная система предприятия).

Машины доставляют продукцию конкретным заказчикам (магазинам, торговым сетям и т.д.). Логисты следят за доставкой продукта покупателю (TMS-система, карты OpenStreetMap + информация от GPS-навигатора машины, GPS-навигатор сотового телефона водителя, контрольные звонки водителю и т.п.).

Данное описание не является строгим, в нем присутствуют некоторые упрощения, но даже оно позволяет оценить сложность логистического процесса для творога Хуторок - задействовано много людей, используется около десятка различных программных средств, ограничения на длительность изготовления (часы) и реализацию (дни). Также здесь опущены процессы планирования, которые также очень важны и сложны.

### 3.4 Интеллектуальная интеграция роботов в производство ###
Роботизация на промышленных предприятиях из года в год набирает обороты и  требует сокращения трудозатрат на проектирование, разработку и установку роботизированных ячеек. Робот является универсальным устройством, однако все еще требует специальной подготовки окружения для своей работы, точной настройки программного обеспечения под задачу по месту установки. Таким образом, универсальность робота как аппаратного устройства нивелируется специализацией и уникальностью программного обеспечения, управляющего им в определенной задаче. Разработка методов и алгоритмов интеллектуального управления промышленным роботом позволяет решить проблему излишней специализации программного обеспечения за счет возможности переобучения робота, использования баз знаний в решении типовых задач.
OLP-системы как первый шаг на пути к универсальным роботам
Классическое программирование промышленных роботов осуществляемое по месту и заключающееся в создании системы управления рабочего органа для конкретной задачи требует большого количества временных и человеческих ресурсов на производстве. Существующие системы оффлайн программирования и проектирования позволяют создавать трехмерные модели производственной линии, загружать модели роботов и проектировать алгоритм управления роботом в виртуальной среде, а затем переносить систему управления на реального робота. Такой подход позволяет существенно сократить время и сложность внедрения робототехнических ячеек в производственный процесс. Однако такое решение является лишь автоматизацией задачи проектирования и программирования промышленного робота. Проблема разработки универсальных управляющих алгоритмов в данных программных продуктах не поддерживается, хотя весомым вкладом является возможность программирования на языках высокого уровня (Java, Python) в отличие от нативных языков промышленных роботов.

### 3.5 Интеллектуальная система управления роботом на примере задачи производственной и складской логистики ###
Одной из ключевых производственных задач является задача логистики. Одним из видов логистики на предприятии является производственная логистика – процесс перемещения продукции по цехам. Использование роботов в задаче производственной логистики продиктовано высокой производительностью автоматов, необходимостью непрерывной и точной обработки продукции. Внедрение робота в такой процесс требует точной настройки системы управления под конкретный продукт, параметры линии и т.д., что снижает гибкость и возможности производства.
Использование интеллектуальной системы управления промышленного робота, которая может самостоятельно перенастраиваться в зависимости от типа продукции, параметров линии и процесса производства дает требуемую универсальность промышленному роботу.
Как может быть построена такая интеллектуальная система?
Рассмотрим конкретную задачу укладки готовой продукции, производимой на фасовочном автомате A3FLEX, на палеты (рисунок 1). Данный автомат может выпускать несколько видов готовой продукции: несколько видов молока и различные соки. Каждый из продуктов имеет свои параметры при укладке на палеты. При осуществлении паллетизации робот должен определить продукт, способ и количество  захватываемых продуктов за один раз, а также размещение группы продуктов на поддоне с учетом раскладки.

![Роботизированная ячейка паллетирования готовой продукции](article-images/Palletizer.jpg)

Рисунок 1 – Имитационная модель роботизированной ячейки паллетизации готовой продукции

Продукция на поддон укладывается в несколько слоев, каждый из слоев имеет свою раскладку и между слоями требует размещения прокладки из картона. Использование баз знаний для хранения знаний о типах и способах укладки, характеристиках продукта позволяет построить гибкую самонастраиваемую систему, которая может обслуживать несколько линий, что повышает утилизацию робота и сокращает сроки его окупаемости.
Вторым классом задач являются линии оборудованные несколькими роботами (рисунок 2), которые взаимодействуют друг с другом посредством обработки продукции, идущей по линии. Так на линии по производству творога подразумевается использование до 6 роботов различных кинематических схем. Мультиагентная система управления роботами на основе баз знаний позволяет координировать работу всех роботов в зависимости от потребностей производственного процесса.

![Роботизированная линия по производству творога](article-images/Spiders.jpg)

Рисунок 2 – Имитационная модель творожного цеха с 6 роботами

### 3.6. Модель взаимодействия промышленных роботов в общей семантической памяти

## Заключение
В данной статье был описан подход к проектированию систем управления предприятиями рецептурного производства с учетом результатов, полученных в рамках направлений Industry 4.0 и промышленного Интернета вещей. Подходы, применяемые в рамках данных направлений, хорошо согласуются с подходами, принятыми в рамках Технологии OSTIS.  Была рассмотрена модель взаимодействия промышленных роботов на базе общей семантической памяти по принятым в упомянутых направлениях принципам.

=======
## Библиографический список

1. [Galbrecht, 2017] Garbrecht S. (2017). The three rules of Industrial Operations Management and Industrial IoT Applications. https://www.linkedin.com/pulse/three-rules-industrial-operations-management-iot-steven-garbrecht/  
2. [Колчмахин, 2014] Колчмахин Ю. Складские бизнес-процессы. Складской комплекс, 1. 2014. http://www.logscm.ru/wp-content/uploads/2014/06/Статья-Складские-бизнес-процессы-Автор-Колмачихин-Юрий.pdf  
3. Stork A. Visual Computing Challenges of Advanced Manufacturing and Industrie 4.0. IEEE computer graphics and applications, 2015, vol. 35, no 2, pp.21-25.  
4. Тарасов В.Б. Стратегический инжиниринг предприятий будущего: массовое сотрудничество, интернет вещей, инициатива «индустрия 4.0», что дальше? // Инжиниринг предприятий и управление знаниями (ИП&УЗ-2016): сб. науч. тр. XIX науч.-практ. конф. Москва, 26—27 апреля 2016 г. / под науч. ред. Ю.Ф. Тельнова. М.: ФГБОУ ВО
«РЭУ им. Г.В. Плеханова», 2016. С. 57—68.  
5. Тельнов Ю.Ф., Данилов А.В., Казаков В.А. Сетевая модель сотрудничества и кооперации предприятий // Инжиниринг предприятий и управление знаниями (ИП&УЗ—2016): сб. науч. тр. XIX науч.-практ. конф. Москва, 26—27 апреля 2016 г. / под науч. ред. Ю.Ф. Тельнова. М.: ФГБОУ ВО «РЭУ им. Г.В. Плеханова», 2016. С. 68—72.  
6. Тарасов В.Б. Интеллектуальные среды: технологическая основа новой экономики в смарт-городах// Реинжиниринг бизнес-процессов на основе современных информационных технологий. Системы управления знаниями. Сборник научных трудов XV-й научно-практической конференции (РБП-СУЗ-2012, Москва, МЭСИ, 26-27 апреля 2012 г.). – М.: МЭСИ, 2012. – С.180-194  
7. Куприяновский В.П., Намиот Д.Е., Дрожжинов В.И., Куприяновская Ю.В., Иванов М.О. Интернет Вещей на промышленных предприятиях // International Journal of Open Information Technologies. 2016. Т. 4, № 12. С. 69—78.  
8. Куприяновский В.П., Намиот Д.Е., Синягов С.А. Кибер-физические системы как основа цифровой экономики // International Journal of Open Information Technologies. 2016. Т. 4, № 2. С. 19—25.  
9. Recommendations for Implementing the Strategic Initiative Industrie 4.0: Securing the Future of German Manufacturing Industry / H. Kagermann, J.Helbig, A.Hellinger, W. Wahlster // Final Report of the Industrie 4.0 Working Group, 2013.  
10. Applied Cyber-Physical Systems/Ed. by S.C.Suh, U.J.Tanik, J.N.Carbone, A.E.Eroglu. – Heidelberg: Springer-Verlag, 2014.  
11. [Савушкин, 2017] Голенков, В.В. Проектирование предприятий рецептурного производства на основе онтологий / В.В. Таберко, Д.С. Иванюк, В.В. Голенков, К.В. Русецкий, Д.В. Шункевич,  И.Т. Давыденко, В.В. Захаров, В.П. Ивашенко, Д.Н. Корончик // Онтология проектирования. – 2017. – Т. 7, №2(24). - С. 123-144. – DOI: 10.18287/2223-9537-2017-7-2-123-144.  
12. [DesignPrinciples 2016] Hermann M, Pentek T, Otto B. Design principles for industrie 4.0 scenarios. InSystem Sciences (HICSS), 2016 49th Hawaii International Conference on 2016 Jan 5 (pp. 3928-3937). IEEE.
